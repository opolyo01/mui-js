(function(){function A(B){this.element=B.element||mui.createElement("div",{className:"mui-popover-default"});this.anchorElement=B.anchorElement||document.body;this.callback=B.callback||{};this.initialize();}A.prototype={isShowing:false,_documentClicked:function(B){if(this.isShowing){if(!mui.getAncestorByClassName(B.target,"mui-popover")&&!mui.getAncestorByClassName(B.target,"mui-navbar-back")){this.hide();}}},hide:function(){if(!this.isShowing){return;}this.isShowing=false;if(this.callback.popoverWillHide){this.callback.popoverWillHide();}mui.removeClass(this.boundingBox,"mui-showing");if(this.callback.popoverDidHide){this.callback.popoverDidHide();}},show:function(){if(this.isShowing){return;}this.position();if(this.callback.popoverWillShow){this.callback.popoverWillShow();}mui.addClass(this.boundingBox,"mui-showing");if(this.callback.popoverDidShow){this.callback.popoverDidShow();}setTimeout(mui.bind(function(){this.isShowing=true;},this),10);},render:function(B){B=B||document.body;if(this.callback.popoverWillRender){this.callback.popoverWillRender();}this.contentBox.appendChild(this.element);B.appendChild(this.boundingBox);if(this.callback.popoverDidRender){this.callback.popoverDidRender();}},position:function(){var C=mui.getXY(this.anchorElement);var B=this.anchorElement.offsetHeight;this.boundingBox.style.left=C[0]+"px";this.boundingBox.style.top=(C[1]+B)+"px";},initialize:function(){this.boundingBox=mui.createElement("div",{className:"mui-popover"});this.contentBox=mui.createElement("div",{className:"mui-popover-content"});this.tip=mui.createElement("div",{className:"mui-popover-tip"});this.contentBox.appendChild(this.tip);this.boundingBox.appendChild(this.contentBox);mui.on(document,"click",mui.bind(this._documentClicked,this));}};mui.add("Popover",A);})();