(function(){function A(B){var C;B=B||{};this.placeholder=B.placeholder||"";this.callback=B.callback||{};if(B.element){this.element=B.element;C=mui.get("form",this.element);this.input=mui.get("input[type='search']",C);this.closeButton=mui.get("div.mui-close",this.element);}else{C=document.createElement("form");this.element=mui.createElement("div",{className:"mui-searchbox"});this.input=mui.createElement("input",{type:"search"});this.closeButton=mui.createElement("div",{className:"mui-close"});this.element.appendChild(C);this.element.appendChild(this.closeButton);C.appendChild(this.input);if(this.placeholder){this.input.setAttribute("placeholder",this.placeholder);}if(B.autocorrect){this.input.setAttribute("autocorrect",B.autocorrect);}if(B.autocapitalize){this.input.setAttribute("autocapitalize",B.autocapitalize);}}mui.on(this.closeButton,"touchstart",mui.bind(this.clear,this));mui.on(C,"submit",this);mui.on(this.input,"blur",this);mui.on(this.input,"focus",this);mui.on(this.input,"keyup",this);if(this.callback.keydown){mui.on(this.input,"keydown",this);}if(this.callback.keypress){mui.on(this.input,"keypress",this);}}A.prototype={element:null,input:null,closeButton:null,placeholder:null,callback:null,render:function(B){B=mui.get(B);if(B){B.appendChild(this.element);}return this;},clear:function(){mui.removeClass(this.element,"mui-typing");this.input.value="";if(this.callback.clear){this.callback.clear();}return this;},handleEvent:function(B){switch(B.type){case"submit":B.preventDefault();this.input.blur();if(this.callback.submit){this.callback.submit(B,this.input.value);}break;case"focus":if(this.input.value.length>0){mui.addClass(this.element,"mui-typing");}else{mui.removeClass(this.element,"mui-typing");}if(this.callback.focus){this.callback.focus(B);}break;case"blur":mui.removeClass(this.element,"mui-typing");if(this.callback.blur){this.callback.blur(B);}break;case"keyup":if(this.input.value.length>0){mui.addClass(this.element,"mui-typing");}else{mui.removeClass(this.element,"mui-typing");}if(this.callback.keyup){this.callback.keyup(B);}break;default:if(this.callback[B.type]){this.callback[B.type].call(this.callback[B.type],B);}}},getValue:function(){return this.input.value;},setValue:function(B){this.input.value=B;return this;}};mui.SearchBox=A;})();